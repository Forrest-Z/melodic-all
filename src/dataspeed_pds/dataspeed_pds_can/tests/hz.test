<?xml version="1.0"?>
<launch>
  <arg name="hz" default="20.0" /> <!-- 20 Hz -->
  <arg name="unit_id" default="0" /> <!-- MASTER -->

  <!-- Generate example data -->
  <node pkg="dataspeed_pds_can" type="dataspeed_pds_can_hz" name="sim" output="screen">
    <param name="hz" value="$(arg hz)" />
    <param name="unit_id" value="$(arg unit_id)" />
    <remap from="can_tx" to="can_rx" />
  </node>

  <!-- Start node under test -->
  <node pkg="dataspeed_pds_can" type="pds_node" name="pds_can" output="screen" />

  <!-- Start the rostest -->
  <test test-name="hztest" pkg="rostest"
        type="hztest" name="hztest" >
    <param name="hz" value="$(arg hz)" />
    <param name="hzerror" value="0.5" />
    <param name="test_duration" value="5.0" />    
    <param name="topic" value="status" />  
    <param name="wait_time" value="2.0" />  
  </test>

</launch>
